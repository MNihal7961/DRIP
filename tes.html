<script>
    function openRejectModal(rejectBtn) {
        const orderId = rejectBtn.attr('data-order-id') || rejectBtn.attr('data-order-id');


    $('#rejectModal').modal('show');

    $('#confirmRejectBtn').off('click').on('click', function() {
        Swal.fire({
            title: 'Are you sure?',
            text: 'You are about to reject this return request.',
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#d33',
            cancelButtonColor: '#3085d6',
            confirmButtonText: 'Yes, reject it!'
        }).then((result) => {
            if (result.isConfirmed) {
                submitRejectForm(orderId);
            }
        });
    });
}

    function submitRejectForm(orderId) {
        const reason = $('#reason').val();
        
        $.ajax({
            url: '/admin/order/return/reject',
            method: 'POST',
            contentType: 'application/json',
            data: JSON.stringify({ orderId, reason }),
            success: function (response) {
                Swal.fire({
                    icon: 'success',
                    title: 'Request Rejected',
                    text: 'The return request has been rejected successfully.',
                });

                $('#rejectModal').modal('hide');
            },
            error: function (error) {
                Swal.fire({
                    icon: 'error',
                    title: 'Oops...',
                    text: 'Something went wrong! Please try again.',
                });
            }
        });
    }
</script>